# KVT Backend Configuration for HugeGraph
# This file contains configuration options for the KVT (Key-Value Transaction) backend

# Backend type identifier
backend=kvt

# KVT native library settings
kvt.native.lib.path=${HUGEGRAPH_HOME}/lib/native/libkvtjni.so

# Transaction settings
kvt.transaction.isolation_level=DEFAULT
# Options: DEFAULT, READ_UNCOMMITTED, READ_COMMITTED, REPEATABLE_READ, SERIALIZABLE
kvt.transaction.timeout=30000
kvt.transaction.retry.times=3
kvt.transaction.retry.interval=500

# Batch operation settings
kvt.batch.enabled=true
kvt.batch.size=1000
kvt.batch.auto_flush=true
kvt.batch.flush_interval=1000

# Query cache settings
kvt.cache.enabled=true
kvt.cache.max_size=10000
kvt.cache.ttl=60000
kvt.cache.eviction_policy=LRU

# Query optimization settings
kvt.query.optimizer.enabled=true
kvt.query.slow_threshold=1000
kvt.query.stats.enabled=true
kvt.query.stats.sample_rate=1.0

# Index settings
kvt.index.enabled=true
kvt.index.rebuild_batch_size=1000
kvt.index.expire_check_interval=3600000

# Session pool settings
kvt.session.pool.size=20
kvt.session.pool.max_size=100
kvt.session.idle_timeout=300000

# Storage settings
kvt.storage.data_path=${HUGEGRAPH_HOME}/data/kvt
kvt.storage.wal_path=${HUGEGRAPH_HOME}/data/kvt/wal
kvt.storage.compression=SNAPPY
# Options: NONE, SNAPPY, LZ4, ZSTD

# Memory settings
kvt.memory.buffer_size=134217728
kvt.memory.cache_size=536870912
kvt.memory.direct_memory=true

# Performance tuning
kvt.performance.read_threads=16
kvt.performance.write_threads=8
kvt.performance.scan_prefetch=true
kvt.performance.async_commit=false

# Monitoring and metrics
kvt.metrics.enabled=true
kvt.metrics.interval=60000
kvt.metrics.export.jmx=true
kvt.metrics.export.prometheus=false
kvt.metrics.export.prometheus.port=9090

# Debug settings
kvt.debug.enabled=false
kvt.debug.log_level=INFO
kvt.debug.trace_transactions=false
kvt.debug.dump_stats_on_close=false

# Table partition settings
kvt.table.default_partition=hash
# Options: hash, range
kvt.table.partition.vertex=hash
kvt.table.partition.edge_out=range
kvt.table.partition.edge_in=range
kvt.table.partition.secondary_index=range
kvt.table.partition.range_index=range
kvt.table.partition.unique_index=range

# Compaction settings (if KVT supports compaction)
kvt.compaction.enabled=true
kvt.compaction.interval=86400000
kvt.compaction.min_files=4
kvt.compaction.max_files=32

# Backup and recovery
kvt.backup.enabled=false
kvt.backup.path=${HUGEGRAPH_HOME}/backup/kvt
kvt.backup.interval=86400000
kvt.backup.keep_count=7

# Security settings
kvt.security.encryption=false
kvt.security.encryption.algorithm=AES256
kvt.security.encryption.key_file=${HUGEGRAPH_HOME}/conf/kvt.key

# Advanced settings (use with caution)
kvt.advanced.direct_io=false
kvt.advanced.mmap_read=true
kvt.advanced.prefetch_size=65536
kvt.advanced.write_buffer_size=67108864
kvt.advanced.max_open_files=1000
kvt.advanced.block_size=4096
kvt.advanced.bloom_filter=true
kvt.advanced.bloom_filter_bits_per_key=10